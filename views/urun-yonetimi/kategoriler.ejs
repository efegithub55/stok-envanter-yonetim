<!DOCTYPE html>
<html lang="en">
  <!-- Head -->
  <%- include("../../components/Head", { title: "Kategoriler" }) %>
  <body class="light" style="display: flex">
    <!-- Sidebar -->
    <%- include("../../components/Sidebar", { active: "kategoriler" }) %>
    <!-- Sidebar -->
    <%- include("../../components/Alert") %>
    <!-- Main -->
    <main id="dashboard-main">
      <div class="products-header">
        <div class="col">
          <div class="row">
            <h2>Kategoriler</h2>
            <div class="info-box primary"><%= totalCategory %></div>
          </div>
          <div class="row">
            <p>Ürün kategorilerinizi yönetin ve düzenleyin</p>
          </div>
        </div>
        <div class="col">
          <div class="row">
            <a class="btn btn-primary add-category-btn"
              ><span class="bxr bx-plus"></span>Yeni Kategori Ekle</a
            >
          </div>
        </div>
      </div>
      <div class="dash-divider"></div>
      <div class="category-flexbox">
        <div class="category-flex-item">
          <div class="col">
            <h4><%= totalCategory %></h4>
            <p>Toplam Kategori</p>
          </div>
          <div class="col">
            <span class="bxr flexbox-icon" data-icon="folder"></span>
          </div>
        </div>
        <div class="category-flex-item">
          <div class="col">
            <h4><%= totalProduct %></h4>
            <p>Toplam Ürün</p>
          </div>
          <div class="col">
            <span class="bxr flexbox-icon" data-icon="package"></span>
          </div>
        </div>
        <div class="category-flex-item">
          <div class="col">
            <h4><%= mostMovement ? mostMovement.kategori_adi : '-' %></h4>
            <p>En Popüler</p>
          </div>
          <div class="col">
            <span class="bxr flexbox-icon" data-icon="star"></span>
          </div>
        </div>
        <div class="category-flex-item">
          <div class="col">
            <h4><%= lastAdded ? lastAdded.kategori_adi : '-' %></h4>
            <p>Son Eklenen</p>
          </div>
          <div class="col">
            <span class="bxr flexbox-icon" data-icon="grid-circle-plus"></span>
          </div>
        </div>
      </div>
      <div class="category-grid">
        <% categories.forEach((ctg) => { %>
        <div class="category-box" data-label="<%= ctg.kategori_adi %>">
          <div class="category-actions">
            <a
              class="btn btn-primary edit-category-btn"
              data-category-id="<%= ctg.id %>"
              ><span class="bxr bx-edit-alt"></span
            ></a>
            <a
              href="/urun-yonetimi/kategoriler/sil/<%= ctg.id %>"
              class="btn btn-danger"
              ><span class="bxr bx-trash"></span
            ></a>
          </div>
          <div class="row">
            <h4
              class="category-badge"
              data-label="<%= ctg.kategori_adi %>"
            ></h4>
            <p class="description"><%= ctg.aciklama %></p>
          </div>
          <div class="ctg-divider"></div>
          <div class="row column">
            <div class="col">
              <p>Ürün Sayısı</p>
              <div><%= ctg.urun_sayisi %></div>
            </div>
            <div class="col">
              <p>Toplam Değer</p>
              <div>₺<%= ctg.kategori_degeri.toLocaleString() %></div>
            </div>
          </div>
        </div>
        <% }) %>
      </div>
    </main>
    <!-- Scripts -->
    <script src="/assets/js/generateColorFromStr.js"></script>
    <script src="/assets/js/modals/addCategory.js"></script>
    <script src="/assets/js/modals/editCategory.js"></script>
  </body>
</html>
